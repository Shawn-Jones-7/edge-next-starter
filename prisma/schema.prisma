// Prisma schema for Cloudflare D1
// Note: D1 does not support Prisma Migrate
// Manage database schema via Wrangler D1 migrations (migrations/*.sql)
// Prisma is used only for type-safe queries
datasource db {
  provider = "sqlite"
  url      = "file:./dev.db" // Used only for Prisma introspection; not actually used
}

generator client {
  provider = "prisma-client-js"
}

// Lead model - Contact form submissions / Inquiries
model Lead {
  id        Int     @id @default(autoincrement())
  name      String // Contact name
  email     String // Contact email
  phone     String? // Contact phone (optional)
  company   String? // Company name (optional)
  subject   String? // Inquiry subject (optional)
  message   String // Inquiry message
  source    String? // Lead source (e.g., contact_form, landing_page)
  status    String  @default("new") // Lead status: new, contacted, qualified, converted, closed
  locale    String? // Language/locale of the submission
  ipAddress String? @map("ip_address") // Submitter IP for anti-spam
  userAgent String? @map("user_agent") // Browser user agent
  createdAt Int     @default(dbgenerated("(strftime('%s', 'now'))")) @map("created_at")
  updatedAt Int     @default(dbgenerated("(strftime('%s', 'now'))")) @map("updated_at")

  @@index([email])
  @@index([status])
  @@index([createdAt])
  @@map("leads")
}
